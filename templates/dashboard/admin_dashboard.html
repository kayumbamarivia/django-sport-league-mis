{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
    /* Admin Dashboard Styles */
    .dashboard-container {
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 8px;
    }

    h2 {
        font-size: 2rem;
        margin-bottom: 20px;
        text-align: center;
    }

    .analytics-cards {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .card {
        background: #fff;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card:hover {
        transform: translateY(-10px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .card h5 {
        font-size: 1.2rem;
        color: #555;
    }

    .card h3 {
        font-size: 2rem;
        margin-top: 10px;
        color: #2c3e50;
    }

    .user-roles, .latest-matches, .upcoming-matches, .latest-reports {
        margin-bottom: 30px;
    }

    .user-roles h4, .latest-matches h4, .upcoming-matches h4, .latest-reports h4 {
        font-size: 1.5rem;
        color: #34495e;
        margin-bottom: 10px;
    }

    .user-roles ul, .latest-matches ul, .upcoming-matches ul, .latest-reports ul {
        list-style: none;
        padding: 0;
    }

    .user-roles li, .latest-matches li, .upcoming-matches li, .latest-reports li {
        background-color: #fff;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 8px;
        box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
    }

    .user-roles li span, .latest-matches li span, .upcoming-matches li span, .latest-reports li span {
        font-weight: bold;
        color: #2980b9;
    }

    .empty-message {
        text-align: center;
        color: #888;
        font-style: italic;
    }
</style>

<div class="dashboard-container">
    <h2>Admin Dashboard</h2>
    
    <!-- Analytics Cards -->
    <div class="analytics-cards">
        <div class="card">
            <h5>Total Users</h5>
            <h3>{{ total_users }}</h3>
        </div>
        <div class="card">
            <h5>Total Leagues</h5>
            <h3>{{ total_leagues }}</h3>
        </div>
        <div class="card">
            <h5>Total Matches</h5>
            <h3>{{ total_matches }}</h3>
        </div>
        <div class="card">
            <h5>Total Teams</h5>
            <h3>{{ total_teams }}</h3>
        </div>
    </div>

    <!-- User Roles Chart -->
    <div class="user-roles">
        <h4>User Roles Distribution</h4>
        <ul>
            {% for role in user_roles_count %}
            <li>{{ role.role }} <span>{{ role.count }}</span></li>
            {% endfor %}
        </ul>
    </div>

    <!-- Latest Matches -->
    <div class="latest-matches">
        <h4>Recent Matches</h4>
        <ul>
            {% for match in latest_matches %}
            <li>
                {{ match.team1 }} vs {{ match.team2 }} - {{ match.date|date:"Y-m-d" }}
            </li>
            {% endfor %}
        </ul>
    </div>

    <!-- Upcoming Matches -->
    <div class="upcoming-matches">
        <h4>Upcoming Matches</h4>
        <ul>
            {% for match in upcoming_matches %}
            <li>
                {{ match.team1 }} vs {{ match.team2 }} at {{ match.venue }} - {{ match.date|date:"Y-m-d H:i" }}
            </li>
            {% empty %}
            <li class="empty-message">No upcoming matches.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Latest Reports -->
    <div class="latest-reports">
        <h4>Latest Reports</h4>
        <ul>
            {% for report in latest_reports %}
            <li>
                {{ report.league.name }} - {{ report.generated_at|date:"Y-m-d H:i" }}
            </li>
            {% empty %}
            <li class="empty-message">No reports available.</li>
            {% endfor %}
        </ul>
    </div>
</div>

{% endblock %}
